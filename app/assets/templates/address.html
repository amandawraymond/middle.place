<div ng-controller="AddressCtrl">
  <h1>I want to find <br class="visible-xs">wi-fi in the MiddleOf.Us</h1>
  <form name="myForm" novalidate ng-submit="submitAddresses();">
    <fieldset>
      <p>Address, City, or Zip:</p>
      <div class="form-group">
        <input type="text" name="address-one" ng-model="formData.addressOne" ng-debounce="300" placeholder="i.e. 273 Buckhead Avenue Northeast, Atlanta, GA 30305" ng-required="!formData.addressTwo" ng-minlength="2" class="col-md-5">
        <span style="color:red" ng-show="myForm.address.$dirty && myForm.address.$invalid">
          <span ng-show="myForm.addressOne.$error.required">Address is required.</span> <!-- TODO: Check if it should be what it was: "myForm.address.$error" -->
          <span ng-show="myForm.addressOne.$error.address">Invalid address.</span> <!-- TODO: Check if it should be what it was: "myForm.address.$error" -->
        </span>
        <div class="inline-block" ng-show="isFirstProcessing"><i class="fa fa-spin fa-spinner validation-indicator"></i></div>
        <i class="fa fa-check green validation-indicator"  ng-show="isFirstValid && !isFirstEmpty"></i>
        <i class="fa fa-times red validation-indicator"    ng-hide="isFirstValid || isFirstEmpty"></i>
        <br><br>
        <input type="text" name="address-two" ng-model="formData.addressTwo" ng-debounce="300" placeholder="optional second address, city, or zip" ng-minlength="2" class="col-md-5">
        <div class="inline-block" ng-show="isSecondProcessing"><i class="fa fa-spin fa-spinner validation-indicator"></i></div>
        <i class="fa fa-check green validation-indicator"  ng-show="isSecondValid && !isSecondEmpty"></i>
        <i class="fa fa-times red validation-indicator"    ng-hide="isSecondValid || isSecondEmpty"></i>
        <br><br>
        <button type="submit" ng-disabled="myForm.$invalid || !isFirstValid || !isSecondValid" ng-click="processing=true" ng-init="processing=false" class="btn btn-primary">
          Submit
        </button>
        <div ng-show="processing" style="display:inline-block;"><i class="fa fa-spin fa-spinner"style="display:inline-block;"></i></div>
      </div>
    </fieldset>
  </form>
  <div ng-show="results && !selectedResult">
    <h2>Closest {{results.length}} results</h2>
    <p>Click for more info</p>
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Name</th>
          <th>From My / Mid Point</th>
          <th>Yelp Rating</th>
          <th>Address</th>
        </tr>
      </thead>
      <tbody id="results">
        <tr ng-repeat="result in results" ng-click="selectResult(result);">
          <td>{{result.name}}</td>
          <td>{{result.distance}} mile(s)</td>
          <td><img src="{{result.rating_image}}" /></td>
          <td>{{result.address}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div ng-show="error">
    <h2>{{error}}</h2>
  </div>
  <div ng-show="selectedResult">
    <div class="alert alert-dismissable alert-primary">
      <button type="button" class="close" ng-click="clearSelectedResult();">close</button>
      <h2>{{selectedResult.name}}</h2>
      <table>
        <tbody>
          <tr>
            <td><h5 style="display:inline"><strong>Yelp Rating:</strong></h5></td>
            <td><h5 style="display:inline;margin-left:10px">{{selectedResult.rating}} / 5</h5></td>
          </tr>
          <tr>
            <td><h5 style="display:inline"><strong>Address:</strong></h5></td>
            <td><h5 style="display:inline-block;margin-left:10px">{{selectedResult.address}}</h5></td>
          </tr>
        </tbody>
      </table>
      <br>
      <h4>Actions:</h4>
      <a href="{{selectedResult.website}}" class="btn btn-info" target="_blank">View on Yelp</a>
      <a href="https://maps.google.com?q={{selectedResult.address}}" class="btn btn-info" target="_blank">View on Google Maps</a>
      <br><br>
      <h4>Text Address To:</h4>
      <input type="text" ng-model="phoneNumber" style="height:38px;color:black;font-size:150%" placeholder="5558675309">
      <button ng-click="createMessage()" class="btn btn-info" style="margin-top:-5px;">Send</button>
    </div>
  </div>
</div>